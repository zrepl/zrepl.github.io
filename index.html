

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>zrepl - ZFS replication &mdash; zrepl  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/banner.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial" href="tutorial.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> zrepl
          

          
            
            <img src="_static/zrepl.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">Implementation Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="pr.html">Talks &amp; Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/zrepl/zrepl">GitHub Repository &amp; Issue Tracker</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">zrepl</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>zrepl - ZFS replication</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/zrepl/zrepl/blob/master/docs/index.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  





<p><a class="reference external" href="https://github.com/zrepl/zrepl/blob/master/LICENSE"><img alt="GitHub license" src="https://img.shields.io/github/license/zrepl/zrepl.svg" /></a> <a class="reference external" href="https://golang.org/"><img alt="Language: Go" src="https://img.shields.io/badge/language-Go-6ad7e5.svg" /></a> <a class="reference external" href="https://zrepl.github.io"><img alt="User Docs" src="https://img.shields.io/badge/docs-web-blue.svg" /></a> <a class="reference external" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=R5QSXJVYHGX96"><img alt="Donate via PayPal" src="https://img.shields.io/badge/donate-paypal-yellow.svg" /></a> <a class="reference external" href="https://liberapay.com/zrepl/donate"><img alt="Donate via Liberapay" src="https://img.shields.io/liberapay/receives/zrepl.svg?logo=liberapay" /></a> <a class="reference external" href="https://twitter.com/intent/tweet?text=Wow:&amp;url=https%3A%2F%2Fgithub.com%2Fzrepl%2Fzrepl"><img alt="Twitter" src="https://img.shields.io/twitter/url/https/github.com/zrepl/zrepl.svg?style=social" /></a></p>
<div class="section" id="zrepl-zfs-replication">
<h1>zrepl - ZFS replication<a class="headerlink" href="#zrepl-zfs-replication" title="Permalink to this headline">¶</a></h1>
<p><strong>zrepl</strong> is a one-stop, integrated solution for ZFS replication.</p>
<div style="margin-bottom: 1em; background: #2e3436; color: white; font-size: 0.8em; min-height: 6em; max-width: 100%; overflow: auto;">
  <pre>
  Job: prod_to_backups
  Type: push
  Replication:
      Attempt #1
      Status: fan-out-filesystems
      Progress: [=========================\----] 246.7 MiB / 264.7 MiB @ 11.5 MiB/s
        zroot              STEPPING (step 1/2, 624 B/1.2 KiB) next: @a => @b
        zroot/ROOT         DONE (step 2/2, 1.2 KiB/1.2 KiB)
        zroot/ROOT/default STEPPING (step 1/2, 123.4 MiB/129.3 MiB) next: @a => @b
        zroot/tmp          STEPPING (step 1/2, 29.9 KiB/44.2 KiB) next: @a => @b
        zroot/usr          STEPPING (step 1/2, 624 B/1.2 KiB) next: @a => @b
        zroot/usr/home     STEPPING (step 1/2, 123.3 MiB/135.3 MiB) next: @a => @b
        zroot/var          STEPPING (step 1/2, 624 B/1.2 KiB) next: @a => @b
        zroot/var/audit    DONE (step 2/2, 1.2 KiB/1.2 KiB)
        zroot/var/crash    DONE (step 2/2, 1.2 KiB/1.2 KiB)
        zroot/var/log      STEPPING (step 1/2, 22.0 KiB/29.2 KiB) next: @a => @b
        zroot/var/mail     STEPPING (step 1/2, 624 B/1.2 KiB) next: @a => @b
  Pruning Sender:
      ...
  Pruning Receiver:
  </pre>
</div><div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="tutorial.html#tutorial"><span class="std std-ref">10 minutes tutorial setup</span></a> gives you a first impression.</p>
</div>
<div class="section" id="main-features">
<h2>Main Features<a class="headerlink" href="#main-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Filesystem replication</strong><ul>
<li>[x] Pull &amp; Push mode</li>
<li>[x] Multiple transport <a class="reference internal" href="configuration/transports.html#transport"><span class="std std-ref">transports</span></a>: TCP, TCP + TLS client auth, SSH</li>
<li>Advanced replication features<ul>
<li>[x] Automatic retries for temporary network errors</li>
<li>[ ] Resumable send &amp; receive</li>
<li>[ ] Compressed send &amp; receive</li>
<li>[ ] Raw encrypted send &amp; receive</li>
</ul>
</li>
</ul>
</li>
<li><strong>Automatic snapshot management</strong><ul>
<li>[x] Periodic filesystem snapshots</li>
<li>[x] Flexible <a class="reference internal" href="configuration/prune.html#prune"><span class="std std-ref">pruning rule system</span></a><ul>
<li>[x] Age-based fading (grandfathering scheme)</li>
<li>[x] Bookmarks to avoid divergence between sender and receiver</li>
</ul>
</li>
</ul>
</li>
<li><strong>Sophisticated Monitoring &amp; Logging</strong><ul>
<li>[x] Live progress reporting via <cite>zrepl status</cite> <a class="reference internal" href="usage.html#usage"><span class="std std-ref">subcommand</span></a></li>
<li>[x] Comprehensive, structured <a class="reference internal" href="configuration/logging.html#logging"><span class="std std-ref">logging</span></a><ul>
<li><code class="docutils literal notranslate"><span class="pre">human</span></code>, <code class="docutils literal notranslate"><span class="pre">logfmt</span></code> and <code class="docutils literal notranslate"><span class="pre">json</span></code> formatting</li>
<li>stdout, syslog and TCP (+TLS client auth) outlets</li>
</ul>
</li>
<li>[x] Prometheus <a class="reference internal" href="configuration/monitoring.html#monitoring"><span class="std std-ref">monitoring</span></a> endpoint</li>
</ul>
</li>
<li><strong>Maintainable implementation in Go</strong><ul>
<li>[x] Cross platform</li>
<li>[x] Type safe &amp; testable code</li>
</ul>
</li>
</ul>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">zrepl as well as this documentation is still under active development.
There is no stability guarantee on the RPC protocol or configuration format,
but we do our best to document breaking changes in the <a class="reference internal" href="changelog.html#changelog"><span class="std std-ref">Changelog</span></a>.</p>
</div>
</div>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<p>We are happy about any help we can get!</p>
<ul class="simple">
<li>Explore the codebase<ul>
<li>These docs live in the <code class="docutils literal notranslate"><span class="pre">docs/</span></code> subdirectory</li>
</ul>
</li>
<li>Document any non-obvious / confusing / plain broken behavior you encounter when setting up zrepl for the first time</li>
<li>Check the <em>Issues</em> and <em>Projects</em> sections for things to do.
The <a class="reference external" href="https://github.com/zrepl/zrepl/labels/good%20first%20issue">good first issues</a> and <a class="reference external" href="https://github.com/zrepl/zrepl/labels/docs">docs</a> are suitable starting points.</li>
</ul>
<div class="note admonition">
<p class="first admonition-title">Development Workflow</p>
<p class="last">The <a class="reference external" href="https://github.com/zrepl/zrepl">GitHub repository</a> is where all development happens.
Make sure to read the <a class="reference external" href="https://github.com/zrepl/zrepl">Developer Documentation section</a> and open new issues or pull requests there.</p>
</div>
</div>
<div class="section" id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#analysis">Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#install-zrepl">Install zrepl</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#generate-tls-certificates">Generate TLS Certificates</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#configure-server-prod">Configure server <code class="docutils literal notranslate"><span class="pre">prod</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#configure-server-backups">Configure server <code class="docutils literal notranslate"><span class="pre">backups</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#apply-configuration-changes">Apply Configuration Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#watch-it-work">Watch it Work</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#summary">Summary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#user-privileges">User Privileges</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#packages">Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#what-next">What next?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="configuration/preface.html">Preface</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/jobs.html">Job Types &amp; Replication</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/transports.html">Transports</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/filter_syntax.html">Filter Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/prune.html">Pruning Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/monitoring.html">Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration/misc.html">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="usage.html#cli-overview">CLI Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#zrepl-daemon">zrepl daemon</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">Implementation Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="implementation.html#testability-performance">Testability &amp; Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="implementation.html#rpc-protocol">RPC protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="implementation.html#logging-transparency">Logging &amp; Transparency</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pr.html">Talks &amp; Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id2">0.1.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id3">0.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id4">0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#previous-releases">Previous Releases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/zrepl/zrepl">GitHub Repository &amp; Issue Tracker</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorial.html" class="btn btn-neutral float-right" title="Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2019, Christian Schwarz

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: master
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="0.0.2/index.html">0.0.2</a></dd>
            <dd><a href="0.0.3/index.html">0.0.3</a></dd>
            <dd><a href="0.1.0-rc3/index.html">0.1.0-rc3</a></dd>
            <dd><a href="v0.1.0/index.html">v0.1.0</a></dd>
            <dd><a href="v0.1.0-rc4/index.html">v0.1.0-rc4</a></dd>
            <dd><a href="v0.1.1/index.html">v0.1.1</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="master/index.html">master</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>