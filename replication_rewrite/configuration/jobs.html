

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Job Types &amp; Replication &mdash; zrepl  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/banner.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="zrepl  documentation" href="../index.html"/>
        <link rel="up" title="Configuration" href="../configuration.html"/>
        <link rel="next" title="Transports" href="transports.html"/>
        <link rel="prev" title="Preface" href="preface.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> zrepl
          

          
            
            <img src="../_static/zrepl.svg" class="logo" />
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../configuration.html">Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="preface.html">Preface</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Job Types &amp; Replication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview-terminology">Overview &amp; Terminology</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-the-active-side-works">How the Active Side Works</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-the-passive-side-works">How the Passive Side Works</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-replication-works">How Replication Works</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#taking-snaphots">Taking Snaphots</a></li>
<li class="toctree-l3"><a class="reference internal" href="#job-type-push">Job Type <code class="docutils literal"><span class="pre">push</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#job-type-sink">Job Type <code class="docutils literal"><span class="pre">sink</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#job-type-pull">Job Type <code class="docutils literal"><span class="pre">pull</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#job-type-source">Job Type <code class="docutils literal"><span class="pre">source</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#local-replication">Local replication</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="transports.html">Transports</a></li>
<li class="toctree-l2"><a class="reference internal" href="filter_syntax.html">Filter Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="prune.html">Pruning Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitoring.html">Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="misc.html">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../implementation.html">Implementation Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pr.html">Talks &amp; Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/zrepl/zrepl">GitHub Repository &amp; Issue Tracker</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">zrepl</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../configuration.html">Configuration</a> &raquo;</li>
        
      <li>Job Types &amp; Replication</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/zrepl/zrepl/blob/replication_rewrite/docs/configuration/jobs.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  


    
    



    <p class="scv-banner scv-sphinx_rtd_theme"><a href="../../master/configuration/jobs.html"><b>Warning:</b> This document is for the development version of zrepl. The main version is master.</a></p>
<div class="section" id="job-types-replication">
<span id="job"></span><h1>Job Types &amp; Replication<a class="headerlink" href="#job-types-replication" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview-terminology">
<h2>Overview &amp; Terminology<a class="headerlink" href="#overview-terminology" title="Permalink to this headline">¶</a></h2>
<p>A <em>job</em> is the unit of activity tracked by the zrepl daemon and configured in the <a class="reference internal" href="../installation.html#mainconfigfile"><span class="std std-ref">main configuration file</span></a>.
Every job has a unique <code class="docutils literal"><span class="pre">name</span></code>, a <code class="docutils literal"><span class="pre">type</span></code> and type-dependent fields which are documented on this page.</p>
<p>Replication always happens between a pair of jobs: one is the <strong>active side</strong>, and one the <strong>passive side</strong>.
The active side executes the replication logic whereas the passive side responds to requests after checking the active side&#8217;s permissions.
For communication, the active side connects to the passive side using a <a class="reference internal" href="transports.html#transport"><span class="std std-ref">transport</span></a> and starts issuing remote procedure calls (RPCs).</p>
<p>The following table shows how different job types can be combined to achieve both push and pull mode setups:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="12%" />
<col width="29%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setup name</th>
<th class="head">active side</th>
<th class="head">passive side</th>
<th class="head">use case</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Push mode</td>
<td><code class="docutils literal"><span class="pre">push</span></code></td>
<td><code class="docutils literal"><span class="pre">sink</span></code></td>
<td><ul class="first last simple">
<li>Laptop backup</li>
<li>NAS behind NAT to offsite</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Pull mode</td>
<td><code class="docutils literal"><span class="pre">pull</span></code></td>
<td><code class="docutils literal"><span class="pre">source</span></code></td>
<td><ul class="first last simple">
<li>Central backup-server for many nodes</li>
<li>Remote server to NAS behind NAT</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>Local replication</td>
<td colspan="2"><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">push</span></code> + <code class="docutils literal"><span class="pre">sink</span></code> in one config</div>
<div class="line">with <a class="reference internal" href="transports.html#transport-local"><span class="std std-ref">local transport</span></a></div>
</div>
</td>
<td><ul class="first last simple">
<li>Backup FreeBSD boot pool</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="section" id="how-the-active-side-works">
<h3>How the Active Side Works<a class="headerlink" href="#how-the-active-side-works" title="Permalink to this headline">¶</a></h3>
<p>The active side (<a class="reference internal" href="#job-push"><span class="std std-ref">push</span></a> and <a class="reference internal" href="#job-pull"><span class="std std-ref">pull</span></a> job) executes the replication and pruning logic:</p>
<ul class="simple">
<li>Wakeup because of finished snapshotting (<code class="docutils literal"><span class="pre">push</span></code> job) or pull interval ticker (<code class="docutils literal"><span class="pre">pull</span></code> job).</li>
<li>Connect to the corresponding passive side using a <a class="reference internal" href="transports.html#transport"><span class="std std-ref">transport</span></a> and instantiate an RPC client.</li>
<li>Replicate data from the sending to the receiving side.</li>
<li>Prune on sender &amp; receiver.</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The progress of the active side can be watched live using the <code class="docutils literal"><span class="pre">zrepl</span> <span class="pre">status</span></code> subcommand.</p>
</div>
</div>
<div class="section" id="how-the-passive-side-works">
<h3>How the Passive Side Works<a class="headerlink" href="#how-the-passive-side-works" title="Permalink to this headline">¶</a></h3>
<p>The passive side (<a class="reference internal" href="#job-sink"><span class="std std-ref">sink</span></a> and <a class="reference internal" href="#job-source"><span class="std std-ref">source</span></a>) waits for connections from the corresponding active side,
using the transport listener type specified in the <code class="docutils literal"><span class="pre">serve</span></code> field of the job configuration.
Each transport listener provides a client&#8217;s identity to the passive side job.
It uses the client identity for access control:</p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">sink</span></code> job only allows pushes to those ZFS filesystems to the active side that are located below <code class="docutils literal"><span class="pre">root_fs/${client_identity}</span></code>.</li>
<li>The <code class="docutils literal"><span class="pre">source</span></code> job has a whitelist of client identities that are allowed pull access.</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">The implementation of the <code class="docutils literal"><span class="pre">sink</span></code> job requires that the connecting client identities be a valid ZFS filesystem name components.</p>
</div>
</div>
<div class="section" id="how-replication-works">
<h3>How Replication Works<a class="headerlink" href="#how-replication-works" title="Permalink to this headline">¶</a></h3>
<p>One of the major design goals of the replication module is to avoid any duplication of the nontrivial logic.
As such, the code works on abstract senders and receiver <strong>endpoints</strong>, where typically one will be implemented by a local program object and the other is an RPC client instance.
Regardless of push- or pull-style setup, the logic executes on the active side, i.e. in the <code class="docutils literal"><span class="pre">push</span></code> or <code class="docutils literal"><span class="pre">pull</span></code> job.</p>
<p>The following steps take place during replication and can be monitored using the <code class="docutils literal"><span class="pre">zrepl</span> <span class="pre">status</span></code> subcommand:</p>
<ul class="simple">
<li>Plan the replication:<ul>
<li>Compare sender and receiver filesystem snapshots</li>
<li>Build the <strong>replication plan</strong><ul>
<li>Per filesystem, compute a diff between sender and receiver snapshots</li>
<li>Build a list of replication steps<ul>
<li>If possible, use incremental sends (<code class="docutils literal"><span class="pre">zfs</span> <span class="pre">send</span> <span class="pre">-i</span></code>)</li>
<li>Otherwise, use full send of most recent snapshot on sender</li>
<li>Give up on filesystems that cannot be replicated without data loss</li>
</ul>
</li>
</ul>
</li>
<li>Retry on errors that are likely temporary (i.e. network failures).</li>
<li>Give up on filesystems where a permanent error was received over RPC.</li>
</ul>
</li>
<li>Execute the plan<ul>
<li>Perform replication steps in the following order:
Among all filesystems with pending replication steps, pick the filesystem whose next replication step&#8217;s snapshot is the oldest.</li>
<li>After a successful replication step, update the replication cursor bookmark (see below)</li>
</ul>
</li>
</ul>
<p>The idea behind the execution order of replication steps is that if the sender snapshots all filesystems simultaneously at fixed intervals, the receiver will have all filesystems snapshotted at time <code class="docutils literal"><span class="pre">T1</span></code> before the first snapshot at <code class="docutils literal"><span class="pre">T2</span> <span class="pre">=</span> <span class="pre">T1</span> <span class="pre">+</span> <span class="pre">$interval</span></code> is replicated.</p>
<p id="replication-cursor-bookmark">The <strong>replication cursor bookmark</strong> <code class="docutils literal"><span class="pre">#zrepl_replication_cursor</span></code> is kept per filesystem on the sending side of a replication setup:
It is a bookmark of the most recent successfully replicated snapshot to the receiving side.
It is is used by the <a class="reference internal" href="prune.html#prune-keep-not-replicated"><span class="std std-ref">not_replicated</span></a> keep rule to identify all snapshots that have not yet been replicated to the receiving side.
Regardless of whether that keep rule is used, the bookmark ensures that replication can always continue incrementally.</p>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">Currently, zrepl does not replicate filesystem properties.
Whe receiving a filesystem, it is never mounted (<cite>-u</cite> flag)  and <cite>mountpoint=none</cite> is set.
This is temporary and being worked on <a class="reference external" href="https://github.com/zrepl/zrepl/issues/24">issue #24</a>.</p>
</div>
</div>
</div>
<div class="section" id="taking-snaphots">
<span id="job-snapshotting-spec"></span><h2>Taking Snaphots<a class="headerlink" href="#taking-snaphots" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">push</span></code> and <code class="docutils literal"><span class="pre">source</span></code> jobs can automatically take periodic snapshots of the filesystems matched by the <code class="docutils literal"><span class="pre">filesystems</span></code> filter field.
The snapshot names are composed of a user-defined prefix followed by a UTC date formatted like <code class="docutils literal"><span class="pre">20060102_150405_000</span></code>.
We use UTC because it will avoid name conflicts when switching time zones or between summer and winter time.</p>
<p>For <code class="docutils literal"><span class="pre">push</span></code> jobs, replication is automatically triggered after all filesystems have been snapshotted.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">jobs</span><span class="p">:</span>
<span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">push</span>
  <span class="n">filesystems</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;&lt;&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;tmp&quot;</span><span class="p">:</span> <span class="n">false</span>
  <span class="p">}</span>
  <span class="n">snapshotting</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">periodic</span>
    <span class="n">prefix</span><span class="p">:</span> <span class="n">zrepl_</span>
    <span class="n">interval</span><span class="p">:</span> <span class="mi">10</span><span class="n">m</span>
  <span class="o">...</span>
</pre></div>
</div>
<p>There is also a <code class="docutils literal"><span class="pre">manual</span></code> snapshotting type, which covers the following use cases:</p>
<ul class="simple">
<li>Existing infrastructure for automatic snapshots: you only want to use zrepl for replication.</li>
<li>Run scripts before and after taking snapshots (like locking database tables).
We are working on better integration for this use case: see <a class="reference external" href="https://github.com/zrepl/zrepl/issues/74">issue #74</a>.</li>
</ul>
<p>Note that you will have to trigger replication manually using the <code class="docutils literal"><span class="pre">zrepl</span> <span class="pre">wakeup</span> <span class="pre">JOB</span></code> subcommand in that case.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">jobs</span><span class="p">:</span>
<span class="o">-</span> <span class="nb">type</span><span class="p">:</span> <span class="n">push</span>
  <span class="n">filesystems</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;&lt;&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;tmp&quot;</span><span class="p">:</span> <span class="n">false</span>
  <span class="p">}</span>
  <span class="n">snapshotting</span><span class="p">:</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">manual</span>
  <span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="job-type-push">
<span id="job-push"></span><h2>Job Type <code class="docutils literal"><span class="pre">push</span></code><a class="headerlink" href="#job-type-push" title="Permalink to this headline">¶</a></h2>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Comment</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">type</span></code></td>
<td>= <code class="docutils literal"><span class="pre">push</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">name</span></code></td>
<td>unique name of the job</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">connect</span></code></td>
<td><a class="reference internal" href="transports.html#transport"><span class="std std-ref">connect specification</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">filesystems</span></code></td>
<td><a class="reference internal" href="filter_syntax.html#pattern-filter"><span class="std std-ref">filter specification</span></a> for filesystems to be snapshotted and pushed to the sink</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">snapshotting</span></code></td>
<td><a class="reference internal" href="#job-snapshotting-spec"><span class="std std-ref">snapshotting specification</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">pruning</span></code></td>
<td><a class="reference internal" href="prune.html#prune"><span class="std std-ref">pruning specification</span></a></td>
</tr>
</tbody>
</table>
<p>Example config: <a class="reference external" href="https://github.com/zrepl/zrepl/blob/master/config/samples/push.yml">config/samples/push.yml</a></p>
</div>
<div class="section" id="job-type-sink">
<span id="job-sink"></span><h2>Job Type <code class="docutils literal"><span class="pre">sink</span></code><a class="headerlink" href="#job-type-sink" title="Permalink to this headline">¶</a></h2>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Comment</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">type</span></code></td>
<td>= <code class="docutils literal"><span class="pre">sink</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">name</span></code></td>
<td>unique name of the job</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">serve</span></code></td>
<td><a class="reference internal" href="transports.html#transport"><span class="std std-ref">serve specification</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">root_fs</span></code></td>
<td>ZFS dataset path are received to
<code class="docutils literal"><span class="pre">$root_fs/$client_identity</span></code></td>
</tr>
</tbody>
</table>
<p>Example config: <a class="reference external" href="https://github.com/zrepl/zrepl/blob/master/config/samples/sink.yml">config/samples/sink.yml</a></p>
</div>
<div class="section" id="job-type-pull">
<span id="job-pull"></span><h2>Job Type <code class="docutils literal"><span class="pre">pull</span></code><a class="headerlink" href="#job-type-pull" title="Permalink to this headline">¶</a></h2>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Comment</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">type</span></code></td>
<td>= <code class="docutils literal"><span class="pre">pull</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">name</span></code></td>
<td>unique name of the job</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">connect</span></code></td>
<td><a class="reference internal" href="transports.html#transport"><span class="std std-ref">connect specification</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">root_fs</span></code></td>
<td>ZFS dataset path are received to
<code class="docutils literal"><span class="pre">$root_fs/$client_identity</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">interval</span></code></td>
<td>Interval at which to pull from the source job</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">pruning</span></code></td>
<td><a class="reference internal" href="prune.html#prune"><span class="std std-ref">pruning specification</span></a></td>
</tr>
</tbody>
</table>
<p>Example config: <a class="reference external" href="https://github.com/zrepl/zrepl/blob/master/config/samples/pull.yml">config/samples/pull.yml</a></p>
</div>
<div class="section" id="job-type-source">
<span id="job-source"></span><h2>Job Type <code class="docutils literal"><span class="pre">source</span></code><a class="headerlink" href="#job-type-source" title="Permalink to this headline">¶</a></h2>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Comment</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">type</span></code></td>
<td>= <code class="docutils literal"><span class="pre">source</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">name</span></code></td>
<td>unique name of the job</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">serve</span></code></td>
<td><a class="reference internal" href="transports.html#transport"><span class="std std-ref">serve specification</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">filesystems</span></code></td>
<td><a class="reference internal" href="filter_syntax.html#pattern-filter"><span class="std std-ref">filter specification</span></a> for filesystems to be snapshotted and exposed to connecting clients</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">snapshotting</span></code></td>
<td><a class="reference internal" href="#job-snapshotting-spec"><span class="std std-ref">snapshotting specification</span></a></td>
</tr>
</tbody>
</table>
<p>Example config: <a class="reference external" href="https://github.com/zrepl/zrepl/blob/master/config/samples/source.yml">config/samples/source.yml</a></p>
</div>
<div class="section" id="local-replication">
<span id="replication-local"></span><h2>Local replication<a class="headerlink" href="#local-replication" title="Permalink to this headline">¶</a></h2>
<p>If you have the need for local replication (most likely between two local storage pools), you can use the <a class="reference internal" href="transports.html#transport-local"><span class="std std-ref">local transport type</span></a> to connect a local push job to a local sink job.</p>
<p>Example config: <a class="reference external" href="https://github.com/zrepl/zrepl/blob/master/config/samples/local.yml">config/samples/local.yml</a>.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="transports.html" class="btn btn-neutral float-right" title="Transports" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="preface.html" class="btn btn-neutral" title="Preface" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-2018, Christian Schwarz.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: replication_rewrite
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../../0.0.2/configuration/jobs.html">0.0.2</a></dd>
            <dd><a href="../../0.0.3/configuration/jobs.html">0.0.3</a></dd>
            <dd><a href="../../0.1.0-rc1/configuration/jobs.html">0.1.0-rc1</a></dd>
            <dd><a href="../../0.1.0-rc2/configuration/jobs.html">0.1.0-rc2</a></dd>
            <dd><a href="../../0.1.0-rc3/configuration/jobs.html">0.1.0-rc3</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../anton_wip/configuration/jobs.html">anton_wip</a></dd>
            <dd><a href="../../fix_diff_output/configuration/jobs.html">fix_diff_output</a></dd>
            <dd><a href="../../master/configuration/jobs.html">master</a></dd>
            <dd><a href="../../parallel_zfs_ops/configuration/jobs.html">parallel_zfs_ops</a></dd>
            <dd><a href="../../push/configuration/jobs.html">push</a></dd>
            <dd><a href="../../replication_error_handling/configuration/jobs.html">replication_error_handling</a></dd>
            <dd><a href="jobs.html">replication_rewrite</a></dd>
        </dl>
    </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>