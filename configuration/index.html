<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.26" />
    <meta name="description" content="">


    <title>Configuration :: zrepl - ZFS replication</title>
    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/github.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/horsey.css" rel="stylesheet">
    
    <link href="/css/theme.css" rel="stylesheet">
    
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script src="/js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    

    

  </head>
  <body class="" data-url="/configuration/">
    <nav id="sidebar" class="">





<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
       
	<p>zrepl Documentation</p>
 


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script type="text/javascript" src="/js/lunr.min.js"></script>
<script type="text/javascript" src="/js/horsey.js"></script>
<script type="text/javascript">
    var baseurl = "https:\/\/zrepl.github.io";
</script>
<script type="text/javascript" src="/js/search.js"></script>

    
  </div>

  
    <ul class="topics">
        
            <li data-nav-id="/" class="dd-item ">
            <a href="/"><i class="fa fa-fw fa-home"></i> zrepl - ZFS replication</a>
            </li>
        
        
        
          
          


 
  
    
    <li data-nav-id="/tutorial/" class="dd-item 
        
        
        
        ">
      <a href="/tutorial/">
        <span>Tutorial</span>

        
        

        
      </a>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/install/" class="dd-item 
        
        
        
        ">
      <a href="/install/">
        <span>Installation</span>

        
        

        
      </a>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/configuration/" class="dd-item 
        parent
        active
        parent
        ">
      <a href="/configuration/">
        <span>Configuration</span>

        
        

          
            <i class="fa fa-angle-down fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/configuration/jobs/" class="dd-item
     
      ">
        <a href="/configuration/jobs/">
        <span>Job Types</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/configuration/map_filter_syntax/" class="dd-item
     
      ">
        <a href="/configuration/map_filter_syntax/">
        <span>Mapping &amp; Filter Syntax</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/configuration/transports/" class="dd-item
     
      ">
        <a href="/configuration/transports/">
        <span>Transports</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/configuration/prune/" class="dd-item
     
      ">
        <a href="/configuration/prune/">
        <span>Pruning Policies</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/configuration/logging/" class="dd-item
     
      ">
        <a href="/configuration/logging/">
        <span>Logging</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/configuration/misc/" class="dd-item
     
      ">
        <a href="/configuration/misc/">
        <span>Miscellaneous</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/impl/" class="dd-item 
        
        
        
        ">
      <a href="/impl/">
        <span>Implementation Overview</span>

        
        

        
      </a>
              
    </li>
  
 

          
        

        
        <section id="shortcuts">
            
                <li class="" role="">
                    <h3>More</h3>
                    <a href="https://github.com/zrepl/zrepl"><i class='fa fa-github'></i> GitHub repo</a>
                    
                </li>
            
                <li class="" role="">
                    
                    <a href="https://twitter.com/problame"><i class='fa fa-twitter'></i> Primary Author on Twitter</a>
                    
                </li>
            
        </section>    
        
        

        
    </ul>
    
     
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            

            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                <span class="links">
                




 <a href='/'>zrepl - ZFS replication</a> > Configuration

 

   
                </span>
            </div>
            <div class="progress">
    <div class="wrapper">

    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <h1>Configuration</h1>
          




<div class="alert 
alert-warning"
 
role="alert">Under Construction</div>


<p>











<ul class="children children-li">
	
    
    

	
		
	
		
  


<li>
<a href="/configuration/jobs/" >Job Types</a>
</li>






			
				
<p>A job is the unit of activity tracked by the zrepl daemon and configured in the configuration file.
Every job has a unique name, a type and type-dependent fields which are documented on this page.
Check out the tutorial and cmd/sampleconf/ for examples on how job types are actually used.
Job Types Source    Parameter Default Description / Example     type  source   name  unique name of the job   serve   serve transport specification   datasets   filter for datasets to expose to client   snapshot_prefix  prefix for ZFS snapshots taken by this job   interval  snapshotting interval   prune   prune policy policy for datasets in datasets with prefix snapshot_prefix     Snapshotting Task (every interval, patient )  A snapshot of filesystems matched by datasets is taken every interval with prefix snapshot_prefix.</p>
				
			
		

		
			

		
	
		
  


<li>
<a href="/configuration/map_filter_syntax/" >Mapping &amp; Filter Syntax</a>
</li>






			
				
<p>How to specify mappings &amp; filters</p>
				
			
		

		
			

		
	
		
  


<li>
<a href="/configuration/transports/" >Transports</a>
</li>






			
				
<p>A transport provides an authenticated io.ReadWriteCloser to the RPC layer. (An io.ReadWriteCloser is essentially a bidirectional reliable communication channel.)
Currently, only the ssh+stdinserver transport is supported.
ssh+stdinserver The way the ssh+stdinserver transport works is inspired by git shell and Borg Backup. It is implemented in the Go package github.com/zrepl/zrepl/sshbytestream. The config excerpts are taken from the tutorial which you should complete before reading further.
serve jobs: - name: pull_backup type: source serve: type: stdinserver client_identity: backup-srv.</p>
				
			
		

		
			

		
	
		
  


<li>
<a href="/configuration/prune/" >Pruning Policies</a>
</li>






			
				
<p>Automated pruning of snapshots</p>
				
			
		

		
			

		
	
		
  


<li>
<a href="/configuration/logging/" >Logging</a>
</li>






			
				
<p>zrepl uses structured logging to provide users with easily processable log messages.
Configuration Logging is configured in the global section of the configuration file. Check out cmd/sampleconf/random/logging.yml for an example on how to configure multiple outlets:
global: logging: OUTLET_TYPE: PARAM: VAUE ... OUTLET_TYPE: ... jobs: ...  Note: Currently, only one instance of an outlet type can be instantiated (Issue #20) Output to stderr should always be considered a critical error.</p>
				
			
		

		
			

		
	
		
  


<li>
<a href="/configuration/misc/" >Miscellaneous</a>
</li>






			
				
<p>Runtime Directories &amp; UNIX Sockets zrepl daemon creates various UNIX sockets to allow communicating with it:
 the stdinserver transport connects to a socket named after client_identity parameter the control subcommand connects to a defined control socket  There is no further authentication on these sockets. Therefore we have to make sure they can only be created and accessed by zrepl daemon.
In fact, zrepl daemon will not bind a socket to a path in a directory that is world-accessible.</p>
				
			
		

		
			

		
	

	
</ul>



</p>


<footer class=" footline" >
	
</footer>





      </div>
    </div>

    
 
    

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/featherlight.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js"></script>
    <script src="/js/learn.js"></script>
    <script src="/js/hugo-learn.js"></script>

    
    <link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
    <script src="/mermaid/mermaid.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    

    

  </body>
</html>
